class r{constructor(t){var s;this.wizard=t,this.form=t.closest("form"),this.validate=((s=this.form)==null?void 0:s.hasAttribute("data-wizard-validation"))??!1,this.tabs=t.querySelectorAll("[data-wizard-nav] .nav-link"),this.tabPanes=t.querySelectorAll("[data-wizard-content] .tab-pane"),this.progressBar=t.querySelector("[data-wizard-progress]"),this.currentIndex=0}init(){this.disableFutureTabs(),this.bindTabClicks(),this.bindButtons(),this.updateProgress(this.currentIndex),this.showTab(this.currentIndex)}disableFutureTabs(){this.validate&&this.tabs.forEach((t,s)=>{s>0&&t.classList.add("disabled")})}bindTabClicks(){this.tabs.forEach((t,s)=>{t.addEventListener("click",e=>{this.validate&&s>this.currentIndex&&!this.validateStep(this.currentIndex)&&(e.preventDefault(),e.stopImmediatePropagation())}),t.addEventListener("shown.bs.tab",()=>{this.currentIndex=s,this.updateProgress(s)})})}bindButtons(){this.wizard.querySelectorAll("[data-wizard-next]").forEach(t=>{t.addEventListener("click",()=>this.nextStep())}),this.wizard.querySelectorAll("[data-wizard-prev]").forEach(t=>{t.addEventListener("click",()=>this.prevStep())}),this.form&&this.form.addEventListener("submit",()=>{this.progressBar&&(this.progressBar.style.width="100%")})}nextStep(){this.currentIndex>=this.tabs.length-1||(!this.validate||this.validateStep(this.currentIndex))&&(this.validate&&this.tabs[this.currentIndex+1].classList.remove("disabled"),this.tabs[this.currentIndex].classList.add("wizard-item-done"),this.showTab(this.currentIndex+1))}prevStep(){this.currentIndex<=0||(this.tabs[this.currentIndex-1].classList.remove("wizard-item-done"),this.showTab(this.currentIndex-1))}validateStep(t){if(!this.validate)return!0;const s=this.tabPanes[t].querySelectorAll("input, select, textarea");let e=!0;return s.forEach(i=>{i.classList.remove("is-invalid","is-valid"),i.checkValidity()?i.classList.add("is-valid"):(i.classList.add("is-invalid"),e=!1)}),e}updateProgress(t){if(this.progressBar){const s=t/(this.tabs.length-1)*100;this.progressBar.style.width=`${Math.min(s,100)}%`}}showTab(t){t<0||t>=this.tabs.length||this.validate&&this.tabs[t].classList.contains("disabled")||new bootstrap.Tab(this.tabs[t]).show()}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-wizard]").forEach(a=>{new r(a).init()})});
